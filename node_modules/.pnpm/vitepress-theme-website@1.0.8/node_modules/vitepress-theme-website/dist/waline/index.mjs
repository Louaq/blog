import { onMounted, onBeforeUnmount, watch } from "vue";
import { useRoute } from "vitepress";
import Waline from "./components/Waline.mjs";
export const useWaline = (walineOptions) => {
  let waline;
  const route = useRoute();
  onMounted(() => {
    updateWaline();
  });
  onBeforeUnmount(() => waline?.destroy());
  function updateWaline() {
    if (waline) {
      waline?.destroy();
    }
    setTimeout(() => {
      if (!document)
        return;
      waline = Waline.newInstance({ walineOptions });
    }, 500);
  }
  watch(() => route.path, updateWaline);
};
export default useWaline;
