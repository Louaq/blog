# ADownæ¨¡å— 

ä¸€ã€æœ¬æ–‡ä»‹ç»Â 
-------

æœ¬æ–‡ç»™å¤§å®¶å¸¦æ¥çš„æ”¹è¿›æœºåˆ¶æ˜¯åˆ©ç”¨2024/02/21å·æœ€æ–°å‘å¸ƒçš„**YOLOv9å…¶ä¸­æå‡ºçš„ADownæ¨¡å—æ¥æ”¹è¿›æˆ‘ä»¬çš„Convæ¨¡å—**ï¼Œå…¶ä¸­YOLOv9é’ˆå¯¹äºè¿™ä¸ªæ¨¡å—å¹¶æ²¡æœ‰ä»‹ç»ï¼Œåªæ˜¯åœ¨å…¶é¡¹ç›®æ–‡ä»¶ä¸­ç”¨åˆ°äº†ï¼Œæˆ‘å°†å…¶æ•´ç†å‡ºæ¥ç”¨äºæˆ‘ä»¬çš„YOLOv8çš„é¡¹ç›®ï¼Œç»è¿‡å®éªŒæˆ‘å‘ç°è¯¥å·ç§¯æ¨¡å—ï¼ˆä½œä¸ºä¸‹é‡‡æ ·æ¨¡å—ï¼‰é¦–å…ˆå¯ä»¥å¤§å¹…åº¦é™ä½å‚æ•°å€¼**ï¼ˆv8nå¤§çº¦å…­åä¸‡ï¼‰**ï¼Œå…¶æ¬¡å…¶ç²¾åº¦ä¸Šä¹Ÿæœ‰å¾ˆé«˜çš„æå‡ï¼ŒåŒæ—¶**æœ¬æ–‡çš„å†…å®¹ç›®å‰ç½‘ç»œä¸Šå¹¶æ— å…¶å®ƒäººæ€»ç»“ï¼ˆä¹Ÿæ˜¯æœ€æ–°å‘å¸ƒçš„ï¼Œå¯ä»¥è¯´BUffæ˜¯é›†æ»¡äº†ï¼‰**å¤§å®¶å¯ä»¥å°è¯•ä»¥ä¸‹åœ¨è‡ªå·±æ•°æ®é›†ä¸Šçš„æ•ˆæœã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/f5ef403f76a543d0a0148a333a39608b.png)

* * *

äºŒã€æ¡†æ¶å›¾
-----

Â ![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/9fc430ef400243b4b1ed90e39b882356.png)

> è¿™å¼ å›¾ï¼ˆå›¾3ï¼‰å±•ç¤ºäº†å¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯ï¼ˆPGIï¼‰åŠå…¶ç›¸å…³ç½‘ç»œæ¶æ„å’Œæ–¹æ³•ã€‚å›¾ä¸­å±•ç¤ºäº†å››ç§ä¸åŒçš„ç½‘ç»œè®¾è®¡ï¼š
>
> **a) PAN (Path Aggregation Network)**ï¼šè¿™ç§ç½‘ç»œç»“æ„ä¸»è¦ç”¨äºæ”¹è¿›ç‰¹å¾èåˆï¼Œä»¥æé«˜ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œç”±äºä¿¡æ¯ç“¶é¢ˆçš„å­˜åœ¨ï¼Œç½‘ç»œä¸­å¯èƒ½ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚
>
> **b) RevCol (Reversible Columns)**ï¼šè¿™æ˜¯ä¸€ç§æ—¨åœ¨å‡å°‘ä¿¡æ¯ä¸¢å¤±çš„ç½‘ç»œè®¾è®¡ã€‚å®ƒé€šè¿‡å¯é€†çš„åˆ—ç»“æ„æ¥å°è¯•ç»´æŒä¿¡æ¯æµé€šä¸å—æŸå¤±ï¼Œä½†å¦‚å›¾ä¸­â€œHeavy Costâ€æ‰€ç¤ºï¼Œè¿™ç§ç»“æ„ä¼šå¢åŠ è®¡ç®—æˆæœ¬ã€‚
>
> **c) æ·±åº¦ç›‘ç£**ï¼šè¿™ç§æ–¹æ³•é€šè¿‡åœ¨ç½‘ç»œçš„å¤šä¸ªå±‚æ¬¡ä¸­æ’å…¥é¢å¤–çš„ç›‘ç£ä¿¡å·æ¥æé«˜å­¦ä¹ çš„æ•ˆç‡å’Œæœ€ç»ˆæ¨¡å‹çš„æ€§èƒ½ã€‚å›¾ä¸­æ˜¾ç¤ºäº†é€šè¿‡æ·±åº¦ç›‘ç£è¿æ¥çš„å„ä¸ªå±‚ã€‚
>
> **d) å¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯ (PGI)**ï¼šPGIæ˜¯ä½œè€…æå‡ºçš„ä¸€ç§æ–°æ–¹æ³•ï¼ˆ**æˆ‘ç†è§£çš„è¿™ç§æ–¹æ³•å°±æ˜¯åœ¨å‰å‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­æ²¡æœ‰è·³çº§é“¾æ¥ï¼‰**ï¼Œå®ƒä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š  
>
> Â  Â 1. ä¸»åˆ†æ”¯ï¼šç”¨äºæ¨ç†çš„æ¶æ„ã€‚  
> Â  Â 2. è¾…åŠ©å¯é€†åˆ†æ”¯ï¼šç”Ÿæˆå¯é çš„æ¢¯åº¦ï¼Œä»¥ä¾›ç»™ä¸»åˆ†æ”¯è¿›è¡Œåå‘ä¼ æ’­ã€‚  
> Â  Â 3. å¤šçº§è¾…åŠ©ä¿¡æ¯ï¼šæ§åˆ¶ä¸»åˆ†æ”¯å­¦ä¹ å¯è§„åˆ’çš„å¤šçº§è¯­ä¹‰ä¿¡æ¯ã€‚
>
> PGIçš„ç›®çš„æ˜¯é€šè¿‡è¾…åŠ©å¯é€†åˆ†æ”¯ï¼ˆå¦‚å›¾ä¸­è™šçº¿æ¡†æ‰€ç¤ºï¼‰æ¥è§£å†³ä¿¡æ¯ç“¶é¢ˆé—®é¢˜ï¼Œä»¥ä¾¿åœ¨ä¸å¢åŠ æ¨ç†æˆæœ¬çš„æƒ…å†µä¸‹ä¸ºæ·±åº¦ç½‘ç»œæä¾›æ›´å¯é çš„æ¢¯åº¦ã€‚é€šè¿‡è¿™ç§è®¾è®¡ï¼Œå³ä½¿æ˜¯è½»é‡çº§å’Œæµ…å±‚çš„ç¥ç»ç½‘ç»œä¹Ÿå¯ä»¥å®ç°æœ‰æ•ˆçš„ä¿¡æ¯ä¿ç•™å’Œå‡†ç¡®çš„æ¢¯åº¦æ›´æ–°ã€‚å¦‚å›¾ä¸­çš„æ·±è‰²æ–¹æ¡†æ‰€ç¤ºçš„ä¸»åˆ†æ”¯ï¼Œé€šè¿‡è¾…åŠ©å¯é€†åˆ†æ”¯æä¾›çš„å¯é æ¢¯åº¦ä¿¡æ¯ï¼Œå¯ä»¥è·å¾—æ›´æœ‰æ•ˆçš„ç›®æ ‡ä»»åŠ¡ç‰¹å¾ï¼Œè€Œä¸ä¼šå› ä¸ºä¿¡æ¯ç“¶é¢ˆè€ŒæŸå¤±é‡è¦ä¿¡æ¯ã€‚
>
> **å›¾ä¸­çš„ç¬¦å·ä»£è¡¨ä¸åŒçš„æ“ä½œ**ï¼šç°è‰²åœ†å½¢ä»£è¡¨æ± åŒ–æ“ä½œï¼Œç™½è‰²åœ†å½¢ä»£è¡¨ä¸Šé‡‡æ ·æ“ä½œï¼Œç°è‰²æ–¹å—ä»£è¡¨é¢„æµ‹å¤´ï¼Œè“è‰²æ–¹å—ä»£è¡¨è¾…åŠ©åˆ†æ”¯ï¼Œæ·±è‰²æ–¹å—ä»£è¡¨ä¸»åˆ†æ”¯ã€‚è¿™ç§è®¾è®¡å…è®¸ç½‘ç»œåœ¨ä¿æŒé«˜æ•ˆè®¡ç®—çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿå¤„ç†å¤æ‚çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

* * *

### 2.1Â Programmable Gradient Informationâ€‹â€‹å¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯

ä¸ºäº†è§£å†³å‰è¿°é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„è¾…åŠ©ç›‘ç£æ¡†æ¶ï¼Œç§°ä¸ºå¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯ï¼ˆPGIï¼‰ï¼Œå¦‚å›¾3ï¼ˆdï¼‰æ‰€ç¤ºã€‚PGIä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå³ï¼ˆ1ï¼‰ä¸»åˆ†æ”¯ï¼Œï¼ˆ2ï¼‰è¾…åŠ©å¯é€†åˆ†æ”¯å’Œï¼ˆ3ï¼‰å¤šçº§è¾…åŠ©ä¿¡æ¯ã€‚ä»å›¾3ï¼ˆdï¼‰æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒPGIçš„æ¨ç†è¿‡ç¨‹åªä½¿ç”¨ä¸»åˆ†æ”¯ï¼Œå› æ­¤ä¸éœ€è¦ä»»ä½•é¢å¤–çš„æ¨ç†æˆæœ¬ã€‚è‡³äºå…¶ä»–ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒä»¬ç”¨äºè§£å†³æˆ–å‡ç¼“æ·±åº¦å­¦ä¹ æ–¹æ³•ä¸­çš„å‡ ä¸ªé‡è¦é—®é¢˜ã€‚å…¶ä¸­ï¼Œè¾…åŠ©å¯é€†åˆ†æ”¯æ—¨åœ¨å¤„ç†ç”±ç¥ç»ç½‘ç»œåŠ æ·±é€ æˆçš„é—®é¢˜ã€‚ç½‘ç»œåŠ æ·±å°†å¯¼è‡´ä¿¡æ¯ç“¶é¢ˆï¼Œè¿™å°†ä½¿å¾—æŸå¤±å‡½æ•°æ— æ³•ç”Ÿæˆå¯é çš„æ¢¯åº¦ã€‚è‡³äºå¤šçº§è¾…åŠ©ä¿¡æ¯ï¼Œå®ƒæ—¨åœ¨å¤„ç†ç”±æ·±åº¦ç›‘ç£é€ æˆçš„è¯¯å·®ç´¯ç§¯é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå…·æœ‰å¤šä¸ªé¢„æµ‹åˆ†æ”¯çš„æ¶æ„å’Œè½»é‡å‹æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€æ­¥ä»‹ç»è¿™ä¸¤ä¸ªéƒ¨åˆ†â€‹â€‹ã€‚Â 

* * *

#### 2.1.1 Auxiliary Reversible Branchè¾…åŠ©å¯é€†åˆ†æ”¯

åœ¨PGIä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†è¾…åŠ©å¯é€†åˆ†æ”¯æ¥ç”Ÿæˆå¯é çš„æ¢¯åº¦å¹¶æ›´æ–°ç½‘ç»œå‚æ•°ã€‚é€šè¿‡æä¾›ä»æ•°æ®åˆ°ç›®æ ‡çš„æ˜ å°„ä¿¡æ¯ï¼ŒæŸå¤±å‡½æ•°å¯ä»¥æä¾›æŒ‡å¯¼ï¼Œå¹¶é¿å…ä»ä¸ç›®æ ‡å…³ç³»è¾ƒå°çš„ä¸å®Œæ•´å‰é¦ˆç‰¹å¾ä¸­æ‰¾åˆ°é”™è¯¯ç›¸å…³æ€§çš„å¯èƒ½æ€§ã€‚æˆ‘ä»¬æå‡ºé€šè¿‡å¼•å…¥å¯é€†æ¶æ„æ¥ç»´æŒå®Œæ•´ä¿¡æ¯ï¼Œä½†åœ¨å¯é€†æ¶æ„ä¸­æ·»åŠ ä¸»åˆ†æ”¯å°†æ¶ˆè€—å¤§é‡çš„æ¨ç†æˆæœ¬ã€‚æˆ‘ä»¬åˆ†æäº†å›¾3ï¼ˆbï¼‰çš„æ¶æ„ï¼Œå¹¶å‘ç°åœ¨æ·±å±‚åˆ°æµ…å±‚æ·»åŠ é¢å¤–è¿æ¥æ—¶ï¼Œæ¨ç†æ—¶é—´å°†å¢åŠ 20%ã€‚å½“æˆ‘ä»¬åå¤å°†è¾“å…¥æ•°æ®æ·»åŠ åˆ°ç½‘ç»œçš„é«˜åˆ†è¾¨ç‡è®¡ç®—å±‚ï¼ˆé»„è‰²æ¡†ï¼‰ï¼Œæ¨ç†æ—¶é—´ç”šè‡³è¶…è¿‡äº†ä¸¤å€ã€‚

ç”±äºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿ç”¨å¯é€†æ¶æ„æ¥è·å–å¯é çš„æ¢¯åº¦ï¼Œå› æ­¤â€œå¯é€†â€å¹¶ä¸æ˜¯æ¨ç†é˜¶æ®µçš„å”¯ä¸€å¿…è¦æ¡ä»¶ã€‚é‰´äºæ­¤ï¼Œæˆ‘ä»¬å°†å¯é€†åˆ†æ”¯è§†ä¸ºæ·±åº¦ç›‘ç£åˆ†æ”¯çš„æ‰©å±•ï¼Œå¹¶è®¾è®¡äº†å¦‚å›¾3ï¼ˆdï¼‰æ‰€ç¤ºçš„è¾…åŠ©å¯é€†åˆ†æ”¯ã€‚è‡³äºä¸»åˆ†æ”¯ï¼Œç”±äºä¿¡æ¯ç“¶é¢ˆå¯èƒ½ä¼šä¸¢å¤±é‡è¦ä¿¡æ¯çš„æ·±å±‚ç‰¹å¾ï¼Œå°†èƒ½å¤Ÿä»è¾…åŠ©å¯é€†åˆ†æ”¯æ¥æ”¶å¯é çš„æ¢¯åº¦ä¿¡æ¯ã€‚è¿™äº›æ¢¯åº¦ä¿¡æ¯å°†æ¨åŠ¨å‚æ•°å­¦ä¹ ï¼Œä»¥å¸®åŠ©æå–æ­£ç¡®å’Œé‡è¦çš„ä¿¡æ¯ï¼Œå¹¶ä½¿ä¸»åˆ†æ”¯èƒ½å¤Ÿè·å–æ›´æœ‰æ•ˆçš„ç›®æ ‡ä»»åŠ¡ç‰¹å¾ã€‚æ­¤å¤–ï¼Œç”±äºå¤æ‚ä»»åŠ¡éœ€è¦åœ¨æ›´æ·±çš„ç½‘ç»œä¸­è¿›è¡Œè½¬æ¢ï¼Œå¯é€†æ¶æ„åœ¨æµ…å±‚ç½‘ç»œä¸Šçš„è¡¨ç°ä¸å¦‚åœ¨ä¸€èˆ¬ç½‘ç»œä¸Šã€‚æˆ‘ä»¬æå‡ºçš„æ–¹æ³•ä¸å¼ºè¿«ä¸»åˆ†æ”¯ä¿ç•™å®Œæ•´çš„åŸå§‹ä¿¡æ¯ï¼Œè€Œæ˜¯é€šè¿‡è¾…åŠ©ç›‘ç£æœºåˆ¶ç”Ÿæˆæœ‰ç”¨çš„æ¢¯åº¦æ¥æ›´æ–°å®ƒã€‚è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿æ˜¯ï¼Œæ‰€æå‡ºçš„æ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨äºè¾ƒæµ…çš„ç½‘ç»œã€‚æœ€åï¼Œç”±äºè¾…åŠ©å¯é€†åˆ†æ”¯å¯ä»¥åœ¨æ¨ç†é˜¶æ®µç§»é™¤ï¼Œå› æ­¤å¯ä»¥ä¿ç•™åŸå§‹ç½‘ç»œçš„æ¨ç†èƒ½åŠ›ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åœ¨PGIä¸­é€‰æ‹©ä»»ä½•å¯é€†æ¶æ„æ¥å……å½“è¾…åŠ©å¯é€†åˆ†æ”¯çš„è§’è‰²ã€‚

* * *

#### 2.1.2 Multi-level Auxiliary Informationå¤šçº§è¾…åŠ©ä¿¡æ¯

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¤šçº§è¾…åŠ©ä¿¡æ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åŒ…å«å¤šä¸ªé¢„æµ‹åˆ†æ”¯çš„æ·±åº¦ç›‘ç£æ¶æ„å¦‚å›¾3ï¼ˆcï¼‰æ‰€ç¤ºã€‚å¯¹äºå¯¹è±¡æ£€æµ‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„ç‰¹å¾é‡‘å­—å¡”æ¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œä¾‹å¦‚å®ƒä»¬å¯ä»¥ä¸€èµ·æ£€æµ‹ä¸åŒå¤§å°çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œè¿æ¥åˆ°æ·±åº¦ç›‘ç£åˆ†æ”¯åï¼Œæµ…å±‚ç‰¹å¾å°†è¢«å¼•å¯¼å­¦ä¹ å°å¯¹è±¡æ£€æµ‹æ‰€éœ€çš„ç‰¹å¾ï¼Œæ­¤æ—¶ç³»ç»Ÿå°†å°†å…¶ä»–å¤§å°çš„å¯¹è±¡ä½ç½®è§†ä¸ºèƒŒæ™¯ã€‚ç„¶è€Œï¼Œä¸Šè¿°è¡Œä¸ºå°†å¯¼è‡´æ·±å±‚ç‰¹å¾é‡‘å­—å¡”ä¸¢å¤±å¾ˆå¤šé¢„æµ‹ç›®æ ‡å¯¹è±¡æ‰€éœ€çš„ä¿¡æ¯ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è®¤ä¸ºæ¯ä¸ªç‰¹å¾é‡‘å­—å¡”éƒ½éœ€è¦æ¥æ”¶æ‰€æœ‰ç›®æ ‡å¯¹è±¡çš„ä¿¡æ¯ï¼Œä»¥ä¾¿åç»­ä¸»åˆ†æ”¯èƒ½å¤Ÿä¿ç•™å®Œæ•´ä¿¡æ¯æ¥å­¦ä¹ å¯¹å„ç§ç›®æ ‡çš„é¢„æµ‹ã€‚

å¤šçº§è¾…åŠ©ä¿¡æ¯çš„æ¦‚å¿µæ˜¯åœ¨è¾…åŠ©ç›‘ç£çš„ç‰¹å¾é‡‘å­—å¡”å±‚ä¹‹é—´å’Œä¸»åˆ†æ”¯ä¹‹é—´æ’å…¥ä¸€ä¸ªé›†æˆç½‘ç»œï¼Œç„¶åä½¿ç”¨å®ƒæ¥ç»“åˆä¸åŒé¢„æµ‹å¤´è¿”å›çš„æ¢¯åº¦ï¼Œå¦‚å›¾3ï¼ˆdï¼‰æ‰€ç¤ºã€‚ç„¶åï¼Œå¤šçº§è¾…åŠ©ä¿¡æ¯å°†æ±‡æ€»åŒ…å«æ‰€æœ‰ç›®æ ‡å¯¹è±¡çš„æ¢¯åº¦ä¿¡æ¯ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä¸»åˆ†æ”¯ç„¶åæ›´æ–°å‚æ•°ã€‚æ­¤æ—¶ï¼Œä¸»åˆ†æ”¯çš„ç‰¹å¾é‡‘å­—å¡”å±‚æ¬¡çš„ç‰¹æ€§ä¸ä¼šè¢«æŸäº›ç‰¹å®šå¯¹è±¡çš„ä¿¡æ¯æ‰€ä¸»å¯¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯ä»¥ç¼“è§£æ·±åº¦ç›‘ç£ä¸­çš„æ–­è£‚ä¿¡æ¯é—®é¢˜ã€‚æ­¤å¤–ï¼Œä»»ä½•é›†æˆç½‘ç»œéƒ½å¯ä»¥åœ¨å¤šçº§è¾…åŠ©ä¿¡æ¯ä¸­ä½¿ç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è§„åˆ’æ‰€éœ€çš„è¯­ä¹‰çº§åˆ«æ¥æŒ‡å¯¼ä¸åŒå¤§å°çš„ç½‘ç»œæ¶æ„çš„å­¦ä¹ ã€‚

* * *

### 2.2Â Generalized ELAN

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†æå‡ºçš„æ–°ç½‘ç»œæ¶æ„ - GELANã€‚é€šè¿‡ç»“åˆä¸¤ç§ç¥ç»ç½‘ç»œæ¶æ„CSPNetå’ŒELANï¼Œè¿™ä¸¤ç§æ¶æ„éƒ½æ˜¯ä»¥æ¢¯åº¦è·¯å¾„è§„åˆ’è®¾è®¡çš„ï¼Œæˆ‘ä»¬è®¾è®¡äº†è€ƒè™‘äº†è½»é‡çº§ã€æ¨ç†é€Ÿåº¦å’Œå‡†ç¡®æ€§çš„å¹¿ä¹‰é«˜æ•ˆå±‚èšåˆç½‘ç»œï¼ˆGELANï¼‰ã€‚å…¶æ•´ä½“æ¶æ„å¦‚å›¾4æ‰€ç¤ºã€‚æˆ‘ä»¬æ¨å¹¿äº†ELANçš„èƒ½åŠ›ï¼ŒELANåŸæœ¬åªä½¿ç”¨å·ç§¯å±‚çš„å †å ï¼Œåˆ°ä¸€ä¸ªæ–°çš„æ¶æ„ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•è®¡ç®—å—ã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/46b1bc49cbc8418a92eb97c8cf9acca9.png)

> è¿™å¼ å›¾ï¼ˆå›¾4ï¼‰å±•ç¤ºäº†å¹¿ä¹‰é«˜æ•ˆå±‚èšåˆç½‘ç»œï¼ˆGELANï¼‰çš„æ¶æ„ï¼Œä»¥åŠå®ƒæ˜¯å¦‚ä½•ä»CSPNetå’ŒELANè¿™ä¸¤ç§ç¥ç»ç½‘ç»œæ¶æ„æ¼”å˜è€Œæ¥çš„ã€‚è¿™ä¸¤ç§æ¶æ„éƒ½è®¾è®¡æœ‰æ¢¯åº¦è·¯å¾„è§„åˆ’ã€‚
> 
> **a) CSPNet**ï¼šåœ¨CSPNetçš„æ¶æ„ä¸­ï¼Œè¾“å…¥é€šè¿‡ä¸€ä¸ªè½¬æ¢å±‚è¢«åˆ†å‰²ä¸ºä¸¤éƒ¨åˆ†ï¼Œç„¶ååˆ†åˆ«é€šè¿‡ä»»æ„çš„è®¡ç®—å—ã€‚ä¹‹åï¼Œè¿™äº›åˆ†æ”¯è¢«é‡æ–°åˆå¹¶ï¼ˆé€šè¿‡concatenationï¼‰ï¼Œå¹¶å†æ¬¡é€šè¿‡è½¬æ¢å±‚ã€‚
> 
> **b) ELAN**ï¼šä¸CSPNetç›¸æ¯”ï¼ŒELANé‡‡ç”¨äº†å †å çš„å·ç§¯å±‚ï¼Œå…¶ä¸­æ¯ä¸€å±‚çš„è¾“å‡ºéƒ½ä¼šä¸ä¸‹ä¸€å±‚çš„è¾“å…¥ç›¸ç»“åˆï¼Œå†ç»è¿‡å·ç§¯å¤„ç†ã€‚
> 
> **c) GELAN**ï¼šç»“åˆäº†CSPNetå’ŒELANçš„è®¾è®¡ï¼Œæå‡ºäº†GELANã€‚å®ƒé‡‡ç”¨äº†CSPNetçš„åˆ†å‰²å’Œé‡ç»„çš„æ¦‚å¿µï¼Œå¹¶åœ¨æ¯ä¸€éƒ¨åˆ†å¼•å…¥äº†ELANçš„å±‚çº§å·ç§¯å¤„ç†æ–¹å¼ã€‚ä¸åŒä¹‹å¤„åœ¨äºGELANä¸ä»…ä½¿ç”¨å·ç§¯å±‚ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»»ä½•è®¡ç®—å—ï¼Œä½¿å¾—ç½‘ç»œæ›´åŠ çµæ´»ï¼Œèƒ½å¤Ÿæ ¹æ®ä¸åŒçš„åº”ç”¨éœ€æ±‚å®šåˆ¶ã€‚
> 
> GELANçš„è®¾è®¡è€ƒè™‘åˆ°äº†è½»é‡åŒ–ã€æ¨ç†é€Ÿåº¦å’Œç²¾ç¡®åº¦ï¼Œä»¥æ­¤æ¥æé«˜æ¨¡å‹çš„æ•´ä½“æ€§èƒ½ã€‚å›¾ä¸­æ˜¾ç¤ºçš„æ¨¡å—å’Œåˆ†åŒºçš„å¯é€‰æ€§è¿›ä¸€æ­¥å¢åŠ äº†ç½‘ç»œçš„é€‚åº”æ€§å’Œå¯å®šåˆ¶æ€§ã€‚GELANçš„è¿™ç§ç»“æ„å…è®¸å®ƒæ”¯æŒå¤šç§ç±»å‹çš„è®¡ç®—å—ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥æ›´å¥½åœ°é€‚åº”å„ç§ä¸åŒçš„è®¡ç®—éœ€æ±‚å’Œç¡¬ä»¶çº¦æŸã€‚
> 
> æ€»çš„æ¥è¯´ï¼ŒGELANçš„æ¶æ„æ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªæ›´åŠ é€šç”¨å’Œé«˜æ•ˆçš„ç½‘ç»œï¼Œå¯ä»¥é€‚åº”ä»è½»é‡çº§åˆ°å¤æ‚çš„æ·±åº¦å­¦ä¹ ä»»åŠ¡ï¼ŒåŒæ—¶ä¿æŒæˆ–å¢å¼ºè®¡ç®—æ•ˆç‡å’Œæ€§èƒ½ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒGELANæ—¨åœ¨è§£å†³ç°æœ‰æ¶æ„çš„é™åˆ¶ï¼Œæä¾›ä¸€ä¸ªå¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥é€‚åº”æœªæ¥æ·±åº¦å­¦ä¹ çš„å‘å±•ã€‚
> 
> **å¤§å®¶çœ‹å›¾ç‰‡ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥å®ƒèåˆäº†ä»€ä¹ˆï¼Œå°±æ˜¯å°†CSPHetçš„anyBlockæ¨¡å—å †å çš„æ–¹å¼å’ŒELANèåˆåˆ°äº†ä¸€èµ·ã€‚**

ç›®å‰é’ˆå¯¹è¯¥ç»“æ„å¹¶æ— åŸç†ä»‹ç»ï¼Œä¸‹é¢çš„å›¾ç‰‡ä¸ºæˆ‘ä¸ªäººç»è¿‡ä»£ç å¤ç°çš„ç»“æ„å›¾ï¼Œç»“æ„ä¸Šä¹Ÿæ˜¯éå¸¸çš„ç®€å•ã€‚Â 

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/816ff24242ce4af6930e832c3724a93a.png)



ä¸‰ã€ æ ¸å¿ƒä»£ç 
-------

**æ ¸å¿ƒä»£ç çš„ä½¿ç”¨æ–¹å¼çœ‹ç« èŠ‚å››ï¼**

```python
import torch
import torch.nn as nn
 
 
__all__ = ['ADown']
 
def autopad(k, p=None, d=1):  # kernel, padding, dilation
    # Pad to 'same' shape outputs
    if d > 1:
        k = d * (k - 1) + 1 if isinstance(k, int) else [d * (x - 1) + 1 for x in k]  # actual kernel-size
    if p is None:
        p = k // 2 if isinstance(k, int) else [x // 2 for x in k]  # auto-pad
    return p
 
 
class Conv(nn.Module):
    # Standard convolution with args(ch_in, ch_out, kernel, stride, padding, groups, dilation, activation)
    default_act = nn.SiLU()  # default activation
 
    def __init__(self, c1, c2, k=1, s=1, p=None, g=1, d=1, act=True):
        super().__init__()
        self.conv = nn.Conv2d(c1, c2, k, s, autopad(k, p, d), groups=g, dilation=d, bias=False)
        self.bn = nn.BatchNorm2d(c2)
        self.act = self.default_act if act is True else act if isinstance(act, nn.Module) else nn.Identity()
 
    def forward(self, x):
        return self.act(self.bn(self.conv(x)))
 
    def forward_fuse(self, x):
        return self.act(self.conv(x))
 
 
class ADown(nn.Module):
    def __init__(self, c1, c2):  # ch_in, ch_out, shortcut, kernels, groups, expand
        super().__init__()
        self.c = c2 // 2
        self.cv1 = Conv(c1 // 2, self.c, 3, 2, 1)
        self.cv2 = Conv(c1 // 2, self.c, 1, 1, 0)
 
    def forward(self, x):
        x = torch.nn.functional.avg_pool2d(x, 2, 1, 0, False, True)
        x1,x2 = x.chunk(2, 1)
        x1 = self.cv1(x1)
        x2 = torch.nn.functional.max_pool2d(x2, 3, 2, 1)
        x2 = self.cv2(x2)
        return torch.cat((x1, x2), 1)
 
 
 
def autopad(k, p=None, d=1):  # kernel, padding, dilation
    """Pad to 'same' shape outputs."""
    if d > 1:
        k = d * (k - 1) + 1 if isinstance(k, int) else [d * (x - 1) + 1 for x in k]  # actual kernel-size
    if p is None:
        p = k // 2 if isinstance(k, int) else [x // 2 for x in k]  # auto-pad
    return p
 
 
class Conv(nn.Module):
    """Standard convolution with args(ch_in, ch_out, kernel, stride, padding, groups, dilation, activation)."""
    default_act = nn.SiLU()  # default activation
 
    def __init__(self, c1, c2, k=1, s=1, p=None, g=1, d=1, act=True):
        """Initialize Conv layer with given arguments including activation."""
        super().__init__()
        self.conv = nn.Conv2d(c1, c2, k, s, autopad(k, p, d), groups=g, dilation=d, bias=False)
        self.bn = nn.BatchNorm2d(c2)
        self.act = self.default_act if act is True else act if isinstance(act, nn.Module) else nn.Identity()
 
    def forward(self, x):
        """Apply convolution, batch normalization and activation to input tensor."""
        return self.act(self.bn(self.conv(x)))
 
    def forward_fuse(self, x):
        """Perform transposed convolution of 2D data."""
        return self.act(self.conv(x))
 
 
 
 
if __name__ == '__main__':
    x = torch.randn(1, 32, 16, 16)
    model = ADown(32, 32)
    print(model(x).shape)
```

* * *

å››ã€æ‰‹æŠŠæ‰‹æ•™ä½ æ·»åŠ ADownæœºåˆ¶
----------------

### Â 4.1 ä¿®æ”¹ä¸€

ç¬¬ä¸€è¿˜æ˜¯å»ºç«‹æ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰¾åˆ°å¦‚ä¸‹ultralytics/nn/modulesæ–‡ä»¶å¤¹ä¸‹å»ºç«‹ä¸€ä¸ªç›®å½•åå­—å‘¢å°±æ˜¯'Addmodules'æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨å…¶å†…éƒ¨å»ºç«‹ä¸€ä¸ªæ–°çš„pyæ–‡ä»¶å°†æ ¸å¿ƒä»£ç å¤åˆ¶ç²˜è´´è¿›å»å³å¯ã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/2aac2e0aaca4444386a452e5dfb98e24.png)





* * *

### 4.2 ä¿®æ”¹äºŒÂ 

ç¬¬äºŒæ­¥æˆ‘ä»¬åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„pyæ–‡ä»¶åå­—ä¸º'\_\_init\_\_.py'ï¼Œç„¶ååœ¨å…¶å†…éƒ¨å¯¼å…¥æˆ‘ä»¬çš„æ£€æµ‹å¤´å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/0ee3621867f5429395322ecd03d95a7f.png)

* * *

### 4.3 ä¿®æ”¹ä¸‰Â 

ç¬¬ä¸‰æ­¥æˆ‘é—¨ä¸­åˆ°å¦‚ä¸‹æ–‡ä»¶'ultralytics/nn/tasks.py'è¿›è¡Œå¯¼å…¥å’Œæ³¨å†Œæˆ‘ä»¬çš„æ¨¡å—ã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/67b28bda87e44d3285f0241acd165256.png)â€‹

* * *

### 4.4 ä¿®æ”¹å››Â 

æŒ‰ç…§æˆ‘çš„æ·»åŠ åœ¨parse\_modelé‡Œæ·»åŠ å³å¯ã€‚

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/cec5bfb62f114501a13099ff717b1a57.png)

**åˆ°æ­¤å°±ä¿®æ”¹å®Œæˆäº†ï¼Œå¤§å®¶å¯ä»¥å¤åˆ¶ä¸‹é¢çš„yamlæ–‡ä»¶è¿è¡Œã€‚**

* * *

äº”ã€ADownçš„yamlæ–‡ä»¶å’Œè¿è¡Œè®°å½•
-------------------

### 5.1 ADownçš„yamlæ–‡ä»¶

**ä¸»å¹²å’ŒNeckå…¨éƒ¨ç”¨ä¸Šè¯¥å·ç§¯è½»é‡åŒ–åˆ°æœºåˆ¶çš„yamlæ–‡ä»¶ã€‚**

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license
# YOLOv8 object detection model with P3-P5 outputs. For Usage examples see https://docs.ultralytics.com/tasks/detect
 
# Parameters
nc: 80  # number of classes
scales:  # model compound scaling constants, i.e. 'model=yolov8n.yaml' will call yolov8.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.33, 0.25, 1024]  # YOLOv8n summary: 225 layers,  3157200 parameters,  3157184 gradients,   8.9 GFLOPs
  s: [0.33, 0.50, 1024]  # YOLOv8s summary: 225 layers, 11166560 parameters, 11166544 gradients,  28.8 GFLOPs
  m: [0.67, 0.75, 768]   # YOLOv8m summary: 295 layers, 25902640 parameters, 25902624 gradients,  79.3 GFLOPs
  l: [1.00, 1.00, 512]   # YOLOv8l summary: 365 layers, 43691520 parameters, 43691504 gradients, 165.7 GFLOPs
  x: [1.00, 1.25, 512]   # YOLOv8x summary: 365 layers, 68229648 parameters, 68229632 gradients, 258.5 GFLOPs
 
# YOLOv8.0n backbone
backbone:
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]]  # 0-P1/2
  - [-1, 1, ADown, [128]]  # 1-P2/4
  - [-1, 3, C2f, [128, True]]
  - [-1, 1, ADown, [256]]  # 3-P3/8
  - [-1, 6, C2f, [256, True]]
  - [-1, 1, ADown, [512]]  # 5-P4/16
  - [-1, 6, C2f, [512, True]]
  - [-1, 1, ADown, [1024]]  # 7-P5/32
  - [-1, 3, C2f, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]]  # 9
 
# YOLOv8.0n head
head:
  - [-1, 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 6], 1, Concat, [1]]  # cat backbone P4
  - [-1, 3, C2f, [512]]  # 12
 
  - [-1, 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 4], 1, Concat, [1]]  # cat backbone P3
  - [-1, 3, C2f, [256]]  # 15 (P3/8-small)
 
  - [-1, 1, ADown, [256]]
  - [[-1, 12], 1, Concat, [1]]  # cat head P4
  - [-1, 3, C2f, [512]]  # 18 (P4/16-medium)
 
  - [-1, 1, ADown, [512]]
  - [[-1, 9], 1, Concat, [1]]  # cat head P5
  - [-1, 3, C2f, [1024]]  # 21 (P5/32-large)
 
  - [[15, 18, 21], 1, Detect, [nc]]  # Detect(P3, P4, P5)
```

* * *

### 5.2 ADownçš„yamlæ–‡ä»¶

**ä»…ä½œä¸ºä¸»å¹²ä¸Šç‰¹å¾æå–çš„Convæ¥ç”¨ã€‚**

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license
# YOLOv8 object detection model with P3-P5 outputs. For Usage examples see https://docs.ultralytics.com/tasks/detect
 
# Parameters
nc: 80  # number of classes
scales:  # model compound scaling constants, i.e. 'model=yolov8n.yaml' will call yolov8.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.33, 0.25, 1024]  # YOLOv8n summary: 225 layers,  3157200 parameters,  3157184 gradients,   8.9 GFLOPs
  s: [0.33, 0.50, 1024]  # YOLOv8s summary: 225 layers, 11166560 parameters, 11166544 gradients,  28.8 GFLOPs
  m: [0.67, 0.75, 768]   # YOLOv8m summary: 295 layers, 25902640 parameters, 25902624 gradients,  79.3 GFLOPs
  l: [1.00, 1.00, 512]   # YOLOv8l summary: 365 layers, 43691520 parameters, 43691504 gradients, 165.7 GFLOPs
  x: [1.00, 1.25, 512]   # YOLOv8x summary: 365 layers, 68229648 parameters, 68229632 gradients, 258.5 GFLOPs
 
# YOLOv8.0n backbone
backbone:
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]]  # 0-P1/2
  - [-1, 1, ADown, [128]]  # 1-P2/4
  - [-1, 3, C2f, [128, True]]
  - [-1, 1, ADown, [256]]  # 3-P3/8
  - [-1, 6, C2f, [256, True]]
  - [-1, 1, ADown, [512]]  # 5-P4/16
  - [-1, 6, C2f, [512, True]]
  - [-1, 1, ADown, [1024]]  # 7-P5/32
  - [-1, 3, C2f, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]]  # 9
 
# YOLOv8.0n head
head:
  - [-1, 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 6], 1, Concat, [1]]  # cat backbone P4
  - [-1, 3, C2f, [512]]  # 12
 
  - [-1, 1, nn.Upsample, [None, 2, 'nearest']]
  - [[-1, 4], 1, Concat, [1]]  # cat backbone P3
  - [-1, 3, C2f, [256]]  # 15 (P3/8-small)
 
  - [-1, 1, Conv, [256, 3, 2]]
  - [[-1, 12], 1, Concat, [1]]  # cat head P4
  - [-1, 3, C2f, [512]]  # 18 (P4/16-medium)
 
  - [-1, 1, Conv, [512, 3, 2]]
  - [[-1, 9], 1, Concat, [1]]  # cat head P5
  - [-1, 3, C2f, [1024]]  # 21 (P5/32-large)
 
  - [[15, 18, 21], 1, Detect, [nc]]  # Detect(P3, P4, P5)
  
```



* * *

### 5.3 è®­ç»ƒä»£ç Â 

å¤§å®¶å¯ä»¥åˆ›å»ºä¸€ä¸ªpyæ–‡ä»¶å°†æˆ‘ç»™çš„ä»£ç å¤åˆ¶ç²˜è´´è¿›å»ï¼Œé…ç½®å¥½è‡ªå·±çš„æ–‡ä»¶è·¯å¾„å³å¯è¿è¡Œã€‚

```python
import warnings
warnings.filterwarnings('ignore')
from ultralytics import YOLO
 
if __name__ == '__main__':
    model = YOLO('ultralytics/cfg/models/v8/yolov8-C2f-FasterBlock.yaml')
    # model.load('yolov8n.pt') # loading pretrain weights
    model.train(data=r'æ›¿æ¢æ•°æ®é›†yamlæ–‡ä»¶åœ°å€',
                # å¦‚æœå¤§å®¶ä»»åŠ¡æ˜¯å…¶å®ƒçš„'ultralytics/cfg/default.yaml'æ‰¾åˆ°è¿™é‡Œä¿®æ”¹taskå¯ä»¥æ”¹æˆdetect, segment, classify, pose
                cache=False,
                imgsz=640,
                epochs=150,
                single_cls=False,  # æ˜¯å¦æ˜¯å•ç±»åˆ«æ£€æµ‹
                batch=4,
                close_mosaic=10,
                workers=0,
                device='0',
                optimizer='SGD', # using SGD
                # resume='', # å¦‚è¿‡æƒ³ç»­è®­å°±è®¾ç½®last.ptçš„åœ°å€
                amp=False,  # å¦‚æœå‡ºç°è®­ç»ƒæŸå¤±ä¸ºNanå¯ä»¥å…³é—­amp
                project='runs/train',
                name='exp',
                )
```



* * *

### 5.4 ADownçš„è®­ç»ƒè¿‡ç¨‹æˆªå›¾Â 

![](https://yangyang666.oss-cn-chengdu.aliyuncs.com/typoraImages/8f4b7d9240c24c458147e39d5ecca712.png)

 

